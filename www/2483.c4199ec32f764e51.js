"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2483],{2483:(D,d,s)=>{s.r(d),s.d(d,{ViajescursoPageModule:()=>q});var g=s(6814),_=s(6223),a=s(9843),u=s(2058),f=s(5861),i=s(5879),b=s(4535),m=s(2296);function x(e,r){if(1&e){const n=i.EpF();i.TgZ(0,"ion-item-sliding")(1,"ion-card")(2,"ion-card-content")(3,"ion-item")(4,"ion-label")(5,"strong"),i._uU(6,"Pasajeros:"),i.qZA(),i._uU(7),i.qZA()(),i.TgZ(8,"ion-item")(9,"ion-label"),i._uU(10),i.qZA()(),i.TgZ(11,"ion-item")(12,"ion-label"),i._uU(13),i.qZA()(),i.TgZ(14,"ion-item")(15,"ion-label"),i._uU(16),i.qZA()(),i.TgZ(17,"ion-item")(18,"ion-label"),i._uU(19),i.qZA()(),i.TgZ(20,"ion-item")(21,"ion-label"),i._uU(22),i.qZA()(),i.TgZ(23,"ion-item")(24,"ion-label"),i._uU(25),i.qZA()(),i._UZ(26,"br"),i.TgZ(27,"ion-item")(28,"ion-label")(29,"strong"),i._uU(30,"Veh\xedculo"),i.qZA()()(),i.TgZ(31,"ion-item")(32,"ion-label"),i._uU(33),i.qZA()(),i.TgZ(34,"ion-item")(35,"ion-label"),i._uU(36),i.qZA()(),i.TgZ(37,"ion-button",20),i.NdJ("click",function(){i.CHM(n);const t=i.oxw(2).$implicit,l=i.oxw(2);return i.KtG(l.finalizarViaje(t))}),i._uU(38,"Finalizar Viaje"),i.qZA()()()()}if(2&e){const n=r.$implicit,o=i.oxw().$implicit,t=i.oxw().$implicit;i.xp6(7),i.AsE(" ",o.nombre," ",o.apellido," "),i.xp6(3),i.hij("Fecha del Viaje: ",t.f_viaje,""),i.xp6(3),i.hij("Hora de Salida: ",t.hora_salida,""),i.xp6(3),i.hij("Salida: ",t.salida,""),i.xp6(3),i.hij("Destino: ",t.destino,""),i.xp6(3),i.hij("Asientos disponibles: ",t.cant_asientos,""),i.xp6(3),i.hij("Estado: ",t.estado,""),i.xp6(8),i.hij("Marca: ",n.marca,""),i.xp6(3),i.hij("Modelo: ",n.modelo,"")}}function j(e,r){if(1&e&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,x,39,10,"ion-item-sliding",5),i.qZA()),2&e){const n=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",n.arregloVehiculo)}}function Z(e,r){if(1&e&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,j,2,1,"ion-item-sliding",5),i.qZA()),2&e){const n=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",n.arregloUsuario)}}function V(e,r){if(1&e&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,Z,2,1,"ion-item-sliding",5),i.qZA()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("ngForOf",n.arregloViajes)}}const v=function(){return["/menuprincipalconductor"]},T=function(){return["/rutaconductor"]},A=function(){return["/perfilconductor"]},U=function(){return["/registrarvehiculo"]},P=function(){return["/paginalogin-usuario"]},y=[{path:"",component:(()=>{var e;class r{constructor(o,t){this.database=o,this.alertController=t,this.arregloDetalle=[{id_detalle:"",id_usuario:"",id_viaje:""}],this.arregloUsuario=[{id_usuario:"",nombre:"",apellido:"",correo:"",fechanacimiento:"",rut:"",celular:"",contrasena:"",fotoperfil:""}],this.arregloVehiculo=[{id_vehiculo:"",marca:"",modelo:"",anio:"",patente:"",asientos:"",id_usuario:"",id_tipo:""}],this.arregloViajes=[{id_viaje:"",f_viaje:"",hora_salida:"",salida:"",destino:"",cant_asientos:"",valor_asiento:"",estado:"",id_usuario:""}]}ngOnInit(){let o=localStorage.getItem("id");this.database.buscarViajeIniciado(o,"Iniciado.").then(l=>{l.length>0?this.database.fetchViajeAceptado().subscribe(c=>{c.length>0&&(console.log("Viajes del usuario: ",c),this.arregloViajes=c,this.database.buscarDetalleViaje(c[0].id_viaje).then(C=>{C.length>0&&this.database.fetchDetalleViaje().subscribe(p=>{this.arregloDetalle=p,this.database.buscarDatosUsuario(p[0].id_usuario).then(w=>{w.length>0&&this.database.fetchUsuarioId().subscribe(h=>{h.length>0&&(this.arregloUsuario=h)})})})}))}):this.presentarAlerta("Error al cargar viajes","Usted a\xfan no tiene viajes iniciados.")}),this.database.buscarVehiculoUsuario(o),this.database.fetchVehiculoUser().subscribe(l=>{this.arregloVehiculo=l})}finalizarViaje(o){this.database.actualizarViaje("Finalizado.",o.id_viaje).then(l=>{if(l){this.presentarAlerta("Viaje Finalizado","Su viaje ha sido finalizado con \xe9xito. Puede ver su viaje en el historial.");const c=this.arregloViajes.indexOf(o);-1!==c&&this.arregloViajes.splice(c,1)}else this.presentarAlerta("Error al finalizar viaje","No se ha podido finalizar el viaje correctamente.")})}presentarAlerta(o,t){var l=this;return(0,f.Z)(function*(){yield(yield l.alertController.create({header:o,message:t,buttons:["Aceptar"]})).present()})()}}return(e=r).\u0275fac=function(o){return new(o||e)(i.Y36(b.N),i.Y36(a.Br))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-viajescurso"]],decls:36,vars:12,consts:[[3,"translucent"],["color","primary",2,"text-align","center"],[2,"text-align","center"],["collapse","condense"],["color","primary",1,"ion-text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],[1,"example-button-row"],[1,"example-flex-container"],["mat-icon-button","","aria-label","Example icon button with a vertical three-dot icon",2,"margin-right","20px",3,"routerLink"],["name","home","color","primary"],[1,"button-text"],["mat-icon-button","","color","primary","aria-label","Example icon button with a home icon",2,"margin-right","20px",3,"routerLink"],["name","location","color","primary"],["mat-icon-button","","color","accent","aria-label","Example icon button with a menu icon",2,"margin-right","20px",3,"routerLink"],["name","person","color","primary"],["mat-icon-button","","color","warn","aria-label","Example icon button with a heart icon",2,"margin-right","20px",3,"routerLink"],["name","car-sport","color","primary"],["mat-icon-button","","aria-label","Example icon button with an open in new tab icon",2,"margin-right","10px",3,"routerLink"],["name","exit","color","primary"],[3,"click"]],template:function(o,t){1&o&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),i._uU(3,"ViaGo"),i.qZA()()(),i.TgZ(4,"ion-content")(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title"),i._uU(8,"Viajes Creados"),i.qZA()()(),i.TgZ(9,"h2",4),i._uU(10,"Sus viajes"),i.qZA(),i.TgZ(11,"ion-list"),i.YNc(12,V,2,1,"ion-item-sliding",5),i.qZA()(),i.TgZ(13,"section",6)(14,"div",7)(15,"div",8)(16,"button",9),i._UZ(17,"ion-icon",10),i.TgZ(18,"span",11),i._uU(19,"Inicio"),i.qZA()(),i.TgZ(20,"button",12),i._UZ(21,"ion-icon",13),i.TgZ(22,"span",11),i._uU(23,"Viaje"),i.qZA()(),i.TgZ(24,"button",14),i._UZ(25,"ion-icon",15),i.TgZ(26,"span",11),i._uU(27,"Perfil"),i.qZA()(),i.TgZ(28,"button",16),i._UZ(29,"ion-icon",17),i.TgZ(30,"span",11),i._uU(31,"Auto"),i.qZA()(),i.TgZ(32,"button",18),i._UZ(33,"ion-icon",19),i.TgZ(34,"span",11),i._uU(35,"Cierre"),i.qZA()()()()()),2&o&&(i.Q6J("translucent",!0),i.xp6(12),i.Q6J("ngForOf",t.arregloDetalle),i.xp6(4),i.Q6J("routerLink",i.DdM(7,v)),i.xp6(4),i.Q6J("routerLink",i.DdM(8,T)),i.xp6(4),i.Q6J("routerLink",i.DdM(9,A)),i.xp6(4),i.Q6J("routerLink",i.DdM(10,U)),i.xp6(4),i.Q6J("routerLink",i.DdM(11,P)))},dependencies:[g.sg,a.YG,a.PM,a.FN,a.W2,a.Gu,a.gu,a.Ie,a.td,a.Q$,a.q_,a.wd,a.sr,a.YI,u.rH,m.RK],styles:['@charset "UTF-8";#container[_ngcontent-%COMP%]{color:#000;width:95%;border-bottom:5%;border:solid 1.5px #469597}#us[_ngcontent-%COMP%]{margin-left:3%;font-family:calibri;font-size:xx-large}#letra[_ngcontent-%COMP%]{font-family:arial;font-size:medium;font-weight:500}.color[_ngcontent-%COMP%]{color:var(--ion-color-new-shade)}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f1f1ec;--ion-border-color:primary}.button-text[_ngcontent-%COMP%]{font-size:8px;margin-top:1px;display:block;text-align:center;color:#469597}']}),r})()}];let M=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[u.Bz.forChild(y),u.Bz]}),r})();var F=s(617),z=s(6385);let q=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[g.ez,_.u5,a.Pc,M,F.Ps,z.t,m.ot]}),r})()}}]);