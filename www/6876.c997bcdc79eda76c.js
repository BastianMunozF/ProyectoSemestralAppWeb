"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6876],{6876:(J,h,s)=>{s.r(h),s.d(h,{ViajesreservadosPageModule:()=>C});var m=s(6814),f=s(6223),o=s(9843),u=s(2058),v=s(5861),e=s(5879),_=s(4535),p=s(2296);function Z(a,t){if(1&a&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"strong"),e._uU(3,"Conductor:"),e.qZA()(),e.TgZ(4,"ion-label"),e._uU(5),e.qZA()()),2&a){const i=t.$implicit;e.xp6(5),e.AsE("",i.nombre," ",i.apellido,"")}}function x(a,t){if(1&a){const i=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-card")(2,"ion-card-content"),e.YNc(3,Z,6,2,"ion-item",5),e.TgZ(4,"ion-item")(5,"ion-label"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-item")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-item")(11,"ion-label"),e._uU(12),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label"),e._uU(15),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label"),e._uU(18),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-label"),e._uU(21),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"ion-item")(24,"ion-label")(25,"strong"),e._uU(26,"Veh\xedculo"),e.qZA()()(),e.TgZ(27,"ion-item")(28,"ion-label"),e._uU(29),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label"),e._uU(32),e.qZA()(),e.TgZ(33,"ion-button",20),e.NdJ("click",function(){e.CHM(i);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.cancelarReserva(n))}),e._uU(34,"Cancelar Reserva"),e.qZA()()()()}if(2&a){const i=t.$implicit,r=e.oxw().$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.arregloUsuario),e.xp6(3),e.hij("Fecha del Viaje: ",r.f_viaje,""),e.xp6(3),e.hij("Hora de Salida: ",r.hora_salida,""),e.xp6(3),e.hij("Salida: ",r.salida,""),e.xp6(3),e.hij("Destino: ",r.destino,""),e.xp6(3),e.hij("Asientos disponibles: ",r.cant_asientos,""),e.xp6(3),e.hij("Estado: ",r.estado,""),e.xp6(8),e.hij("Marca: ",i.marca,""),e.xp6(3),e.hij("Modelo: ",i.modelo,"")}}function j(a,t){if(1&a&&(e.TgZ(0,"ion-item-sliding"),e.YNc(1,x,35,9,"ion-item-sliding",5),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.arregloVehiculo)}}const U=function(){return["/menuprincipal"]},A=function(){return["/tomarviaje"]},V=function(){return["/perfilusuario"]},T=function(){return["/comenzarviaje"]},E=function(){return["/paginalogin-usuario"]},P=[{path:"",component:(()=>{var a;class t{constructor(r,n){this.database=r,this.alertController=n,this.arregloDetalle=[{id_detalle:"",id_usuario:"",id_viaje:""}],this.arregloUsuario=[{id_usuario:"",nombre:"",apellido:"",correo:"",fechanacimiento:"",rut:"",celular:"",contrasena:"",fotoperfil:""}],this.arregloVehiculo=[{id_vehiculo:"",marca:"",modelo:"",anio:"",patente:"",asientos:"",id_usuario:"",id_tipo:""}],this.arregloViajes=[{id_viaje:"",f_viaje:"",hora_salida:"",salida:"",destino:"",cant_asientos:"",valor_asiento:"",estado:"",id_usuario:""}]}ngOnInit(){let r=localStorage.getItem("id");this.database.buscarDetalleUser(r).then(l=>{l.length>0?this.database.fetchDetalleUser().subscribe(c=>{c.length>0?(this.arregloDetalle=c,this.database.buscarViajeReservado(c[2].id_viaje,"Disponible.").then(R=>{R.length>0?this.database.fetchViajeReservado().subscribe(d=>{d.length>0?(this.arregloViajes=d,this.database.buscarDatosUsuario(d[8].id_usuario).then(q=>{q.length>0?this.database.fetchUsuarioId().subscribe(g=>{g.length>0?(this.arregloUsuario=g,this.database.buscarVehiculoUsuario(g[0].id).then(F=>{F.length>0?this.database.fetchVehiculoUser().subscribe(b=>{b.length>0?this.arregloVehiculo=b:this.presentarAlerta("Error al cargar veh\xedculo","Error en fetch buscarVehiculoUsuario.")}):this.presentarAlerta("Error al cargar veh\xedculo","Error en buscarVehiculoUsuario.")})):this.presentarAlerta("Error al cargar usuario","Error en fetch buscarDatosUsuario.")}):this.presentarAlerta("Error al cargar usuario","Error en buscarDatosUsuario.")})):this.presentarAlerta("Error al cargar viaje","Error en buscarViajeReservado.")}):this.presentarAlerta("Error al cargar viaje","Error en buscarViajeReservado.")})):this.presentarAlerta("Error al cargar detalle","Error en fetch buscarDetalleUser.")}):this.presentarAlerta("Error al cargar detalle","Error en buscarDetalleUser.")})}cancelarReserva(r){this.database.cancelarReservaUser(r.id_viaje).then(n=>{if(n){this.presentarAlerta("Reserva cancelada","Su reserva ha sido cancelada.");const l=this.arregloViajes.indexOf(r);-1!==l&&this.arregloViajes.splice(l,1)}else this.presentarAlerta("Error al cancelar reserva","No se ha podido cancelar su reserva.")})}presentarAlerta(r,n){var l=this;return(0,v.Z)(function*(){yield(yield l.alertController.create({header:r,message:n,buttons:["Aceptar"]})).present()})()}}return(a=t).\u0275fac=function(r){return new(r||a)(e.Y36(_.N),e.Y36(o.Br))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-viajesreservados"]],decls:36,vars:12,consts:[[3,"translucent"],["color","primary",2,"text-align","center"],[2,"text-align","center"],["collapse","condense"],["color","primary",1,"ion-text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],[1,"example-button-row"],[1,"example-flex-container"],["mat-icon-button","","aria-label","Example icon button with a vertical three-dot icon",2,"margin-right","20px",3,"routerLink"],["name","home","color","primary"],[1,"button-text"],["mat-icon-button","","color","primary","aria-label","Example icon button with a home icon",2,"margin-right","20px",3,"routerLink"],["name","location","color","primary"],["mat-icon-button","","color","accent","aria-label","Example icon button with a menu icon",2,"margin-right","20px",3,"routerLink"],["name","person","color","primary"],["mat-icon-button","","color","warn","aria-label","Example icon button with a heart icon",2,"margin-right","20px",3,"routerLink"],["name","car-sport","color","primary"],["mat-icon-button","","aria-label","Example icon button with an open in new tab icon",2,"margin-right","10px",3,"routerLink"],["name","exit","color","primary"],[3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),e._uU(3,"ViaGo"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title"),e._uU(8,"Viajes Reservados"),e.qZA()()(),e.TgZ(9,"h2",4),e._uU(10,"Sus viajes"),e.qZA(),e.TgZ(11,"ion-list"),e.YNc(12,j,2,1,"ion-item-sliding",5),e.qZA()(),e.TgZ(13,"section",6)(14,"div",7)(15,"div",8)(16,"button",9),e._UZ(17,"ion-icon",10),e.TgZ(18,"span",11),e._uU(19,"Inicio"),e.qZA()(),e.TgZ(20,"button",12),e._UZ(21,"ion-icon",13),e.TgZ(22,"span",11),e._uU(23,"Viaje"),e.qZA()(),e.TgZ(24,"button",14),e._UZ(25,"ion-icon",15),e.TgZ(26,"span",11),e._uU(27,"Perfil"),e.qZA()(),e.TgZ(28,"button",16),e._UZ(29,"ion-icon",17),e.TgZ(30,"span",11),e._uU(31,"Auto"),e.qZA()(),e.TgZ(32,"button",18),e._UZ(33,"ion-icon",19),e.TgZ(34,"span",11),e._uU(35,"Cierre"),e.qZA()()()()()),2&r&&(e.Q6J("translucent",!0),e.xp6(12),e.Q6J("ngForOf",n.arregloViajes),e.xp6(4),e.Q6J("routerLink",e.DdM(7,U)),e.xp6(4),e.Q6J("routerLink",e.DdM(8,A)),e.xp6(4),e.Q6J("routerLink",e.DdM(9,V)),e.xp6(4),e.Q6J("routerLink",e.DdM(10,T)),e.xp6(4),e.Q6J("routerLink",e.DdM(11,E)))},dependencies:[m.sg,o.YG,o.PM,o.FN,o.W2,o.Gu,o.gu,o.Ie,o.td,o.Q$,o.q_,o.wd,o.sr,o.YI,u.rH,p.RK],styles:['@charset "UTF-8";#container[_ngcontent-%COMP%]{color:#000;width:95%;border-bottom:5%;border:solid 1.5px #469597}#us[_ngcontent-%COMP%]{margin-left:3%;font-family:calibri;font-size:xx-large}#letra[_ngcontent-%COMP%]{font-family:arial;font-size:medium;font-weight:500}.color[_ngcontent-%COMP%]{color:var(--ion-color-new-shade)}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f1f1ec;--ion-border-color:primary}.button-text[_ngcontent-%COMP%]{font-size:8px;margin-top:1px;display:block;text-align:center;color:#469597}']}),t})()}];let y=(()=>{var a;class t{}return(a=t).\u0275fac=function(r){return new(r||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(P),u.Bz]}),t})();var M=s(617),D=s(6385);let C=(()=>{var a;class t{}return(a=t).\u0275fac=function(r){return new(r||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,f.u5,o.Pc,y,M.Ps,D.t,p.ot]}),t})()}}]);