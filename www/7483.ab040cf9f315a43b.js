"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7483],{7483:(w,b,l)=>{l.r(b),l.d(b,{HistorialusuarioPageModule:()=>O});var Z=l(6814),U=l(6223),n=l(9843),m=l(2058),v=l(5861),i=l(5879),j=l(4535),x=l(2296);function T(o,r){if(1&o&&(i.TgZ(0,"ion-item-sliding")(1,"ion-card")(2,"ion-card-content")(3,"ion-item")(4,"ion-label")(5,"strong"),i._uU(6,"Conductor:"),i.qZA(),i._uU(7),i.qZA()(),i.TgZ(8,"ion-item")(9,"ion-label"),i._uU(10),i.qZA()(),i.TgZ(11,"ion-item")(12,"ion-label"),i._uU(13),i.qZA()(),i.TgZ(14,"ion-item")(15,"ion-label"),i._uU(16),i.qZA()(),i.TgZ(17,"ion-item")(18,"ion-label"),i._uU(19),i.qZA()(),i.TgZ(20,"ion-item")(21,"ion-label"),i._uU(22),i.qZA()(),i.TgZ(23,"ion-item")(24,"ion-label"),i._uU(25),i.qZA()(),i._UZ(26,"br"),i.TgZ(27,"ion-item")(28,"ion-label")(29,"strong"),i._uU(30,"Veh\xedculo"),i.qZA()()(),i.TgZ(31,"ion-item")(32,"ion-label"),i._uU(33),i.qZA()(),i.TgZ(34,"ion-item")(35,"ion-label"),i._uU(36),i.qZA()()()()()),2&o){const e=r.$implicit,t=i.oxw().$implicit,a=i.oxw().$implicit;i.xp6(7),i.AsE(" ",t.nombre," ",t.apellido," "),i.xp6(3),i.hij("Fecha del Viaje: ",a.f_viaje,""),i.xp6(3),i.hij("Hora de Salida: ",a.hora_salida,""),i.xp6(3),i.hij("Salida: ",a.salida,""),i.xp6(3),i.hij("Destino: ",a.destino,""),i.xp6(3),i.hij("Asientos disponibles: ",a.cant_asientos,""),i.xp6(3),i.hij("Estado: ",a.estado,""),i.xp6(8),i.hij("Marca: ",e.marca,""),i.xp6(3),i.hij("Modelo: ",e.modelo,"")}}function A(o,r){if(1&o&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,T,37,10,"ion-item-sliding",3),i.qZA()),2&o){const e=i.oxw(3);i.xp6(1),i.Q6J("ngForOf",e.arregloVehiculo)}}function P(o,r){if(1&o&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,A,2,1,"ion-item-sliding",3),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.arregloUsuario)}}function y(o,r){if(1&o&&(i.TgZ(0,"ion-item-sliding"),i.YNc(1,P,2,1,"ion-item-sliding",3),i.qZA()),2&o){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.arregloViajes)}}const V=function(){return["/menuprincipal"]},M=function(){return["/tomarviaje"]},H=function(){return["/perfilusuario"]},D=function(){return["/comenzarviaje"]},C=function(){return["/paginalogin-usuario"]},F=[{path:"",component:(()=>{var o;class r{constructor(t,a){this.database=t,this.alertController=a,this.arregloDetalle=[{id_detalle:"",id_usuario:"",id_viaje:""}],this.arregloUsuario=[{id:"",nombre:"",apellido:"",correo:"",fechanacimiento:"",rut:"",celular:"",contrasena:"",fotoperfil:""}],this.arregloVehiculo=[{id_vehiculo:"",marca:"",modelo:"",anio:"",patente:"",asientos:"",id_usuario:"",id_tipo:""}],this.arregloViajes=[{id_viaje:"",f_viaje:"",hora_salida:"",salida:"",destino:"",cant_asientos:"",valor_asiento:"",estado:"",id_usuario:""}]}ngOnInit(){let t=localStorage.getItem("id");this.database.buscarDetalleUser(t).then(g=>{g.length>0?this.database.fetchDetalleUser().subscribe(s=>{if(s.length>0){console.log("Detalle: ",s),this.arregloDetalle=s,this.arregloViajes=[],this.arregloUsuario=[],this.arregloVehiculo=[];for(let h=0;h<s.length;h++)this.database.buscarViajeReservado(s[h].id_viaje,"Finalizado.").then(p=>{p.length>0&&this.database.fetchViajeReservado().subscribe(d=>{if(d.length>0){console.log("Viajes: ",d);for(const c of d)this.arregloViajes.some(u=>u.id_viaje===c.id_viaje)||this.arregloViajes.push(c);this.database.buscarDatosConductor(d[0].id_usuario).then(c=>{c.length>0&&this.database.fetchConductor().subscribe(u=>{u.length>0&&(console.log("Usuario: ",u),this.arregloUsuario=u,this.database.buscarVehiculoUsuario(u[0].id).then(f=>{f.length>0&&this.database.fetchVehiculoUser().subscribe(_=>{_.length>0&&(console.log("Vehiculo: ",_),this.arregloVehiculo=_)})}).catch(f=>{console.log("Error en Buscar Veh\xedculo Usuario: ",f)}))})}).catch(c=>{console.log("Error en Buscar Datos Usuario: ",c)})}})}).catch(p=>{console.log("Error en Buscar Viaje Reservado: ",p)})}}):this.presentarAlerta("Viajes no encontrados","Aun no ha concretado ninguno de sus viajes.")}).catch(g=>{console.log("Error en Buscar Detalle User: ",g)})}presentarAlerta(t,a){var g=this;return(0,v.Z)(function*(){yield(yield g.alertController.create({header:t,message:a,buttons:["Aceptar"]})).present()})()}}return(o=r).\u0275fac=function(t){return new(t||o)(i.Y36(j.N),i.Y36(n.Br))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-historialusuario"]],decls:32,vars:12,consts:[[3,"translucent"],["color","primary",2,"text-align","center"],["color","primary",1,"ion-text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],[1,"example-button-row"],[1,"example-flex-container"],["mat-icon-button","","aria-label","Example icon button with a vertical three-dot icon",2,"margin-right","20px",3,"routerLink"],["name","home","color","primary"],[1,"button-text"],["mat-icon-button","","color","primary","aria-label","Example icon button with a home icon",2,"margin-right","20px",3,"routerLink"],["name","location","color","primary"],["mat-icon-button","","color","accent","aria-label","Example icon button with a menu icon",2,"margin-right","20px",3,"routerLink"],["name","person","color","primary"],["mat-icon-button","","color","warn","aria-label","Example icon button with a heart icon",2,"margin-right","20px",3,"routerLink"],["name","car-sport","color","primary"],["mat-icon-button","","aria-label","Example icon button with an open in new tab icon",2,"margin-right","10px",3,"routerLink"],["name","exit","color","primary"]],template:function(t,a){1&t&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),i._uU(3,"ViaGo"),i.qZA()()(),i.TgZ(4,"ion-content")(5,"h2",2),i._uU(6,"Historial de Viajes Realizados"),i.qZA(),i.TgZ(7,"ion-list"),i.YNc(8,y,2,1,"ion-item-sliding",3),i.qZA()(),i.TgZ(9,"section",4)(10,"div",5)(11,"div",6)(12,"button",7),i._UZ(13,"ion-icon",8),i.TgZ(14,"span",9),i._uU(15,"Inicio"),i.qZA()(),i.TgZ(16,"button",10),i._UZ(17,"ion-icon",11),i.TgZ(18,"span",9),i._uU(19,"Viaje"),i.qZA()(),i.TgZ(20,"button",12),i._UZ(21,"ion-icon",13),i.TgZ(22,"span",9),i._uU(23,"Perfil"),i.qZA()(),i.TgZ(24,"button",14),i._UZ(25,"ion-icon",15),i.TgZ(26,"span",9),i._uU(27,"Auto"),i.qZA()(),i.TgZ(28,"button",16),i._UZ(29,"ion-icon",17),i.TgZ(30,"span",9),i._uU(31,"Cierre"),i.qZA()()()()()),2&t&&(i.Q6J("translucent",!0),i.xp6(8),i.Q6J("ngForOf",a.arregloDetalle),i.xp6(4),i.Q6J("routerLink",i.DdM(7,V)),i.xp6(4),i.Q6J("routerLink",i.DdM(8,M)),i.xp6(4),i.Q6J("routerLink",i.DdM(9,H)),i.xp6(4),i.Q6J("routerLink",i.DdM(10,D)),i.xp6(4),i.Q6J("routerLink",i.DdM(11,C)))},dependencies:[Z.sg,n.PM,n.FN,n.W2,n.Gu,n.gu,n.Ie,n.td,n.Q$,n.q_,n.wd,n.sr,n.YI,m.rH,x.RK],styles:['@charset "UTF-8";#container[_ngcontent-%COMP%]{color:#000;width:95%;border-bottom:5%;border:solid 1.5px #469597}#us[_ngcontent-%COMP%]{margin-left:3%;font-family:calibri;font-size:xx-large}#letra[_ngcontent-%COMP%]{font-family:arial;font-size:medium;font-weight:500}.color[_ngcontent-%COMP%]{color:var(--ion-color-new-shade)}ion-content[_ngcontent-%COMP%]{--ion-background-color:#f1f1ec;--ion-border-color:primary}.button-text[_ngcontent-%COMP%]{font-size:8px;margin-top:1px;display:block;text-align:center;color:#469597}']}),r})()}];let q=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[m.Bz.forChild(F),m.Bz]}),r})();var E=l(617),J=l(6385);let O=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[Z.ez,U.u5,n.Pc,q,E.Ps,J.t,x.ot]}),r})()}}]);