"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5411],{5411:(ee,U,g)=>{g.d(U,{N:()=>_});var T=g(5861),A=g(5619),y=g(9468),L=g(7582),N=g(5592),q=g(2438),H={error:"cordova_not_available"},V={error:"plugin_not_installed"};function w(n){if(typeof window<"u"&&window.angular){var t=window.document,r=window.angular.element(t.querySelector("[ng-app]")||t.body).injector();if(r)return r.get("$q")(function(o,i){n(o,i)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(o,i){n(o,i)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function p(n,e,t){var r,a;"string"==typeof n?r=n:(r=n.constructor.getPluginRef(),t=n.constructor.getPluginName(),a=n.constructor.getPluginInstallName());var o=C(r);return!(!o||e&&typeof o[e]>"u")||(typeof window>"u"||!window.cordova?(function z(n,e){typeof process>"u"&&console.warn(e?"Native: tried calling "+n+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+n+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(t,e),H):(function W(n,e,t){console.warn(t?"Native: tried calling "+n+"."+t+", but the "+n+" plugin is not installed.":"Native: tried accessing the "+n+" plugin but it's not installed."),e&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+e+"'")}(t,a,e),V))}function I(n,e,t,r){if(void 0===e&&(e={}),e.sync)return n;if("reverse"===e.callbackOrder)n.unshift(r),n.unshift(t);else if("node"===e.callbackStyle)n.push(function(l,s){l?r(l):t(s)});else if("object"===e.callbackStyle&&e.successName&&e.errorName){var a={};a[e.successName]=t,a[e.errorName]=r,n.push(a)}else if(typeof e.successIndex<"u"||typeof e.errorIndex<"u"){var o=function(){e.successIndex>n.length?n[e.successIndex]=t:n.splice(e.successIndex,0,t)},i=function(){e.errorIndex>n.length?n[e.errorIndex]=r:n.splice(e.errorIndex,0,r)};e.successIndex>e.errorIndex?(i(),o()):(o(),i())}else n.push(t),n.push(r);return n}function m(n,e,t,r,a,o){void 0===r&&(r={}),t=I(t,r,a,o);var i=p(n,e);if(!0===i){var l=C(n.constructor.getPluginRef());return l[e].apply(l,t)}return i}function v(n,e,t,r,a,o){if(void 0===r&&(r={}),t=I(t,r,a,o),function Q(n,e){return n._objectInstance&&(!e||typeof n._objectInstance[e]<"u")}(n,e))return n._objectInstance[e].apply(n._objectInstance,t)}function C(n){return typeof window<"u"?S(window,n):null}function S(n,e){for(var t=e.split("."),r=n,a=0;a<t.length;a++){if(!r)return null;r=r[t[a]]}return r}var $=function(){function n(){}return n.installed=function(){return!0===p(this.pluginRef)},n.getPlugin=function(){return typeof window<"u"?function Z(n,e){for(var t=e.split("."),r=n,a=0;a<t.length;a++){if(!r)return null;r=r[t[a]]}return r}(window,this.pluginRef):null},n.getPluginName=function(){return this.pluginName},n.getPluginRef=function(){return this.pluginRef},n.getPluginInstallName=function(){return this.plugin},n.getSupportedPlatforms=function(){return this.platforms},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function b(n,e,t,r){return function(n,e,t){return void 0===t&&(t={}),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return t.sync?m(n,e,r,t):t.observable?function k(n,e,t,r){return void 0===r&&(r={}),new N.y(function(a){var o;return o=r.destruct?m(n,e,t,r,function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return a.next(i)},function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return a.error(i)}):m(n,e,t,r,a.next.bind(a),a.error.bind(a)),o&&o.error&&(a.error(o.error),a.complete()),function(){try{if(r.clearFunction)return r.clearWithArgs?m(n,r.clearFunction,t,r,a.next.bind(a),a.error.bind(a)):m(n,r.clearFunction,[])}catch(i){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(i)}}})}(n,e,r,t):t.eventObservable&&t.event?function G(n,e){return e=typeof window<"u"&&e?S(window,e):e||(typeof window<"u"?window:{}),(0,q.R)(e,n)}(t.event,t.element):t.otherPromise?function O(n,e,t,r){return void 0===r&&(r={}),w(function(a,o){var i=m(n,e,t,r);i?i.error?o(i.error):i.then&&i.then(a).catch(o):o({error:"unexpected_error"})})}(n,e,r,t):function M(n,e,t,r){void 0===r&&(r={});var a,o,i=w(function(l,s){a=r.destruct?m(n,e,t,r,function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return l(f)},function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return s(f)}):m(n,e,t,r,l,s),o=s});return a&&a.error&&(i.catch(function(){}),"function"==typeof o&&o(a.error)),i}(n,e,r,t)}}(n,e,t).apply(this,r)}function h(n,e,t,r){return r=Array.from(r),function Y(n,e,t){return void 0===t&&(t={}),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(t.sync)return v(n,e,r,t);if(t.observable)return new N.y(function(s){var f;return f=t.destruct?v(n,e,r,t,function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return s.next(u)},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return s.error(u)}):v(n,e,r,t,s.next.bind(s),s.error.bind(s)),f&&f.error&&s.error(f.error),function(){try{return t.clearWithArgs?v(n,t.clearFunction,r,t,s.next.bind(s),s.error.bind(s)):v(n,t.clearFunction,[])}catch(u){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(u)}}});if(t.otherPromise)return w(function(s,f){var u;u=t.destruct?v(n,e,r,t,function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return s(c)},function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return f(c)}):v(n,e,r,t,s,f),u&&u.then?u.then(s,f):f()});var o,i,l=w(function(s,f){o=t.destruct?v(n,e,r,t,function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return s(u)},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return f(u)}):v(n,e,r,t,s,f),i=f});return o&&o.error&&(l.catch(function(){}),"function"==typeof i&&i(o.error)),l}}(n,e,t).apply(this,r)}function E(n,e){return n._objectInstance&&n._objectInstance[e]?n._objectInstance[e]:null}function x(n,e,t){n._objectInstance&&(n._objectInstance[e]=t)}!function F(){if(typeof process>"u"){var n=typeof window<"u"?window:{},t=Date.now(),r=!1;n.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-t)+" ms"),r=!0}),setTimeout(function(){!r&&n.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var J=function(){function n(e){this._objectInstance=e}return n.prototype.addTransaction=function(e){return h(this,"addTransaction",{sync:!0},arguments)},n.prototype.transaction=function(e){return h(this,"transaction",{successIndex:2,errorIndex:1},arguments)},n.prototype.readTransaction=function(e){return h(this,"readTransaction",{},arguments)},n.prototype.startNextTransaction=function(){return h(this,"startNextTransaction",{sync:!0},arguments)},n.prototype.open=function(){return h(this,"open",{},arguments)},n.prototype.close=function(){return h(this,"close",{},arguments)},n.prototype.executeSql=function(e,t){return h(this,"executeSql",{},arguments)},n.prototype.sqlBatch=function(e){return h(this,"sqlBatch",{},arguments)},n.prototype.abortallPendingTransactions=function(){return h(this,"abortallPendingTransactions",{sync:!0},arguments)},Object.defineProperty(n.prototype,"databaseFeatures",{get:function(){return E(this,"databaseFeatures")},set:function(e){x(this,"databaseFeatures",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"openDBs",{get:function(){return E(this,"openDBs")},set:function(e){x(this,"openDBs",e)},enumerable:!1,configurable:!0}),n}(),j=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,L.ZT)(e,n),e.prototype.create=function(t){var r=this;return function(){if(!0===p(r))return new Promise(function(a,o){sqlitePlugin.openDatabase(t,function(i){return a(new J(i))},o)})}()},e.prototype.echoTest=function(){return b(this,"echoTest",{},arguments)},e.prototype.selfTest=function(){return b(this,"selfTest",{},arguments)},e.prototype.deleteDatabase=function(t){return b(this,"deleteDatabase",{},arguments)},e.\u0275fac=function(){let t;return function(a){return(t||(t=y.n5z(e)))(a||e)}}(),e.\u0275prov=y.Yz7({token:e,factory:e.\u0275fac}),e.pluginName="SQLite",e.pluginRef="sqlitePlugin",e.plugin="cordova-sqlite-storage",e.repo="https://github.com/litehelpers/Cordova-sqlite-storage",e.platforms=["Android","iOS","macOS","Windows"],e=(0,L.gn)([],e)}($),B=g(9843);let _=(()=>{var n;class e{constructor(r,a,o){this.sqlite=r,this.platform=a,this.alertController=o,this.tablaConductor="CREATE TABLE IF NOS EXIST conductor(id INTEGER PRIMARY KEY autoincrement, nombre VARCHAR(30) NOT NULL, apellido VARCHAR(30) NOT NULL, edad NUMBER NOT NULL, correo VARCHAR(30) NOT NULL, rut VARCHAR(13) NOT NULL, fechanacimiento DATE NOT NULL, celular NUMBER NOT NULL, marca VARCHAR(15) NOT NULL, modelo VARCHAR(30) NOT NULL, anio NUMBER NOT NULL, patente VARCHAR(6) NOT NULL, contrasena VARCHAR(30) NOT NULL, confcontrasena VARCHAR(30) NOT NULL);",this.registroConductor="INSERT or IGNORE INTO conductor(id, nombre, apellido, edad, correo, rut, fechanacimiento, celular, marca, modelo, anio, patente, contrasena, confcontrasena) VALUES (1, 'Bastian', 'Munoz', 20, 'basti.munoz.f@gmail.com', '21.235.705-7', '02/18/2003', 959044934, 'Ford', 'Mustang', 1976, 'XH6640', 'Basti123', 'Basti123');",this.listaConductor=new A.X([]),this.isDBReady=new A.X(!1),this.crearBD()}dbState(){return this.isDBReady.asObservable()}fetchConductor(){return this.listaConductor.asObservable()}buscarConductor(){return this.database.executeSql("SELECT * FROM conductor;",[]).then(r=>{let a=[];if(r.rows.length>0)for(var o=0;o<r.rows.length;o++)a.push({id:r.rows.item(o).id,nombre:r.rows.item(o).nombre,apellido:r.rows.item(o).apellido,edad:r.rows.item(o).edad,correo:r.rows.item(o).correo,rut:r.rows.item(o).rut,fechanacimiento:r.rows.item(o).fechanacimiento,celular:r.rows.item(o).celular,marca:r.rows.item(o).marca,modelo:r.rows.item(o).modelo,anio:r.rows.item(o).anio,patente:r.rows.item(o).anio});this.listaConductor.next(a)})}insertarConductor(r,a,o,i,l,s,f,u,c,d,R,P,D){return this.database.executeSql("INSERT INTO conductor(nombre, apellido, edad, correo, rut, fechanacimiento, celular, marca, modelo, anio, patente, contrasena, confcontrasena) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[r,a,o,i,l,s,f,u,c,d,R,P,D]).then(oe=>{this.buscarConductor()})}actualizarConductor(r,a,o,i,l,s,f,u,c,d,R,P){return this.database.executeSql("UPDATE coductor SET nombre = ?, apellido = ?, edad = ?, correo = ?, rut = ?, fechanacimiento = ?, celular = ?, marca = ?, modelo = ?, anio = ?, patente = ? WHERE id = ?;",[a,o,i,l,s,f,u,c,d,R,P,r]).then(D=>{this.buscarConductor()})}eliminarConductor(r){return this.database.executeSql("DELETE FROM conductor WHERE id = ?;",[r]).then(a=>{this.buscarConductor()})}crearBD(){this.platform.ready().then(()=>{this.sqlite.create({name:"bdconductores.bd",location:"default"}).then(r=>{this.database=r,this.crearTablas()}).catch(r=>{this.presentAlert("Error en la base de datos: "+r)})})}crearTablas(){var r=this;return(0,T.Z)(function*(){try{yield r.database.executeSql(r.tablaConductor,[]),yield r.database.executeSql(r.registroConductor,[]),r.isDBReady.next(!0)}catch(a){r.presentAlert("Error en Crear Tablas: "+a)}})()}presentAlert(r){var a=this;return(0,T.Z)(function*(){yield(yield a.alertController.create({header:"Error",message:"Se ha encontrado un error.",buttons:["Aceptar"]})).present()})()}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(j),y.LFG(B.t4),y.LFG(B.Br))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})()}}]);