"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6876],{6876:(F,d,s)=>{s.r(d),s.d(d,{ViajesreservadosPageModule:()=>J});var g=s(6814),f=s(6223),t=s(9843),c=s(2058),_=s(5861),e=s(5879),Z=s(4535),m=s(2296);function j(a,n){if(1&a&&(e.TgZ(0,"ion-item")(1,"ion-label")(2,"strong"),e._uU(3,"Conductor:"),e.qZA()(),e.TgZ(4,"ion-label"),e._uU(5),e.qZA()()),2&a){const r=n.$implicit,i=n.index;e.xp6(5),e.AsE("",r[i].nombre," ",r[i].apellido,"")}}function x(a,n){if(1&a){const r=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-card")(2,"ion-card-content"),e.YNc(3,j,6,2,"ion-item",5),e.TgZ(4,"ion-item")(5,"ion-label"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-item")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-item")(11,"ion-label"),e._uU(12),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label"),e._uU(15),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label"),e._uU(18),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-label"),e._uU(21),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"ion-item")(24,"ion-label")(25,"strong"),e._uU(26,"Veh\xedculo"),e.qZA()()(),e.TgZ(27,"ion-item")(28,"ion-label"),e._uU(29),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label"),e._uU(32),e.qZA()(),e.TgZ(33,"ion-button",19),e.NdJ("click",function(){e.CHM(r);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.cancelarReserva(o))}),e._uU(34,"Cancelar Reserva"),e.qZA()()()()}if(2&a){const r=n.$implicit,i=n.index,o=e.oxw().$implicit,l=e.oxw();e.xp6(3),e.Q6J("ngForOf",l.arregloUsuario),e.xp6(3),e.hij("Fecha del Viaje: ",o[i].f_viaje,""),e.xp6(3),e.hij("Hora de Salida: ",o[i].hora_salida,""),e.xp6(3),e.hij("Salida: ",o[i].salida,""),e.xp6(3),e.hij("Destino: ",o[i].destino,""),e.xp6(3),e.hij("Asientos disponibles: ",o[i].cant_asientos,""),e.xp6(3),e.hij("Estado: ",o[i].estado,""),e.xp6(8),e.hij("Marca: ",r[i].marca,""),e.xp6(3),e.hij("Modelo: ",r[i].modelo,"")}}function V(a,n){if(1&a&&(e.TgZ(0,"ion-item-sliding"),e.YNc(1,x,35,9,"ion-item-sliding",5),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.arregloVehiculo)}}const U=function(){return["/menuprincipal"]},A=function(){return["/tomarviaje"]},T=function(){return["/perfilusuario"]},y=function(){return["/comenzarviaje"]},P=function(){return["/paginalogin-usuario"]},M=[{path:"",component:(()=>{var a;class n{constructor(i,o){this.database=i,this.alertController=o,this.arregloDetalle=[{id_detalle:"",id_usuario:"",id_viaje:""}],this.arregloUsuario=[{id_usuario:"",nombre:"",apellido:"",correo:"",fechanacimiento:"",rut:"",celular:"",contrasena:"",fotoperfil:""}],this.arregloVehiculo=[{id_vehiculo:"",marca:"",modelo:"",anio:"",patente:"",asientos:"",id_usuario:"",id_tipo:""}],this.arregloViajes=[{id_viaje:"",f_viaje:"",hora_salida:"",salida:"",destino:"",cant_asientos:"",valor_asiento:"",estado:"",id_usuario:""}]}ngOnInit(){let i=localStorage.getItem("id");this.database.buscarDetalleUser(i),this.database.fetchDetalleUser().subscribe(l=>{l.length>0&&(this.arregloDetalle=l,this.arregloDetalle.forEach(h=>{this.database.buscarViajeReservado(h.id_viaje,"Disponible."),this.database.fetchViajeReservado().subscribe(p=>{p.length>0&&(this.arregloViajes=p,this.arregloViajes.forEach((R,v)=>{this.database.buscarDatosUsuario(R.id_usuario),this.database.fetchUsuarioId().subscribe(u=>{u.length>0&&(this.arregloUsuario[v]=u[0],this.database.buscarVehiculoUsuario(u[0].id),this.database.fetchVehiculoUser().subscribe(b=>{b.length>0&&(this.arregloVehiculo[v]=b[0])}))})}))})}))})}cancelarReserva(i){this.database.cancelarReservaUser(i.id_viaje).then(o=>{if(o){this.presentarAlerta("Reserva cancelada","Su reserva ha sido cancelada.");const l=this.arregloViajes.indexOf(i);-1!==l&&this.arregloViajes.splice(l,1)}else this.presentarAlerta("Error al cancelar reserva","No se ha podido cancelar su reserva.")})}presentarAlerta(i,o){var l=this;return(0,_.Z)(function*(){yield(yield l.alertController.create({header:i,message:o,buttons:["Aceptar"]})).present()})()}}return(a=n).\u0275fac=function(i){return new(i||a)(e.Y36(Z.N),e.Y36(t.Br))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-viajesreservados"]],decls:27,vars:12,consts:[[3,"translucent"],["color","primary",2,"text-align","center"],[2,"text-align","center"],["collapse","condense"],["color","primary",1,"ion-text-center"],[4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","align-items","center"],[1,"example-button-row"],[1,"example-flex-container"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",2,"margin-right","20px",3,"routerLink"],["name","home","color","primary"],["mat-icon-button","","color","primary","aria-label","Example icon button with a home icon",2,"margin-right","20px",3,"routerLink"],["name","location","color","primary"],["mat-icon-button","","color","accent","aria-label","Example icon button with a menu icon",2,"margin-right","20px",3,"routerLink"],["name","person","color","primary"],["mat-icon-button","","color","warn","aria-label","Example icon button with a heart icon",2,"margin-right","20px",3,"routerLink"],["name","car-sport","color","primary"],["mat-icon-button","","aria-label","Example icon button with a open in new tab icon",2,"margin-right","10px",3,"routerLink"],["name","exit","color","primary"],[3,"click"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),e._uU(3,"ViaGo"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title"),e._uU(8,"Viajes Reservados"),e.qZA()()(),e.TgZ(9,"h2",4),e._uU(10,"Sus viajes"),e.qZA(),e.TgZ(11,"ion-list"),e.YNc(12,V,2,1,"ion-item-sliding",5),e.qZA()(),e.TgZ(13,"ion-footer")(14,"section",6)(15,"div",7)(16,"div",8)(17,"button",9),e._UZ(18,"ion-icon",10),e.qZA(),e.TgZ(19,"button",11),e._UZ(20,"ion-icon",12),e.qZA(),e.TgZ(21,"button",13),e._UZ(22,"ion-icon",14),e.qZA(),e.TgZ(23,"button",15),e._UZ(24,"ion-icon",16),e.qZA(),e.TgZ(25,"button",17),e._UZ(26,"ion-icon",18),e.qZA()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(12),e.Q6J("ngForOf",o.arregloViajes),e.xp6(5),e.Q6J("routerLink",e.DdM(7,U)),e.xp6(2),e.Q6J("routerLink",e.DdM(8,A)),e.xp6(2),e.Q6J("routerLink",e.DdM(9,T)),e.xp6(2),e.Q6J("routerLink",e.DdM(10,y)),e.xp6(2),e.Q6J("routerLink",e.DdM(11,P)))},dependencies:[g.sg,t.YG,t.PM,t.FN,t.W2,t.fr,t.Gu,t.gu,t.Ie,t.td,t.Q$,t.q_,t.wd,t.sr,t.YI,c.rH,m.RK]}),n})()}];let D=(()=>{var a;class n{}return(a=n).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.Bz.forChild(M),c.Bz]}),n})();var q=s(617),E=s(6385);let J=(()=>{var a;class n{}return(a=n).\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.ez,f.u5,t.Pc,D,q.Ps,E.t,m.ot]}),n})()}}]);